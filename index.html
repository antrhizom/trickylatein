<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Latein: Typische Übersetzungsfehler</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        const ChevronRight = () => (
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <polyline points="9 18 15 12 9 6"></polyline>
            </svg>
        );

        const Award = ({ className }) => (
            <svg className={className} width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <circle cx="12" cy="8" r="7"></circle>
                <polyline points="8.21 13.89 7 23 12 20 17 23 15.79 13.88"></polyline>
            </svg>
        );

        const Printer = () => (
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <polyline points="6 9 6 2 18 2 18 9"></polyline>
                <path d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"></path>
                <rect x="6" y="14" width="12" height="8"></rect>
            </svg>
        );

        const BookOpen = ({ className }) => (
            <svg className={className} width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path>
                <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path>
            </svg>
        );

        const LatinQuiz = () => {
            const [stage, setStage] = useState('welcome');
            const [username, setUsername] = useState('');
            const [currentRound, setCurrentRound] = useState(0);
            const [currentError, setCurrentError] = useState(0);
            const [currentPhase, setCurrentPhase] = useState('teaching');
            const [answers, setAnswers] = useState([]);
            const [showFeedback, setShowFeedback] = useState(false);
            const [selectedAnswer, setSelectedAnswer] = useState(null);
            const [learnings, setLearnings] = useState([]);
            const [shuffledOptions, setShuffledOptions] = useState([]);

            const rounds = [
                // Runde 1
                [
                    {
                        errorType: "Ablativus absolutus",
                        color: "yellow",
                        teaching: {
                            latinParts: [
                                { text: "Hostibus victis", highlight: true },
                                { text: ", milites gavisi sunt.", highlight: false }
                            ],
                            options: [
                                "Die Feinde wurden besiegt und die Soldaten freuten sich.",
                                "Nachdem die Feinde besiegt worden waren, freuten sich die Soldaten.",
                                "Die besiegten Feinde freuten sich über die Soldaten.",
                                "Die Feinde und die Soldaten wurden besiegt."
                            ],
                            correct: "Nachdem die Feinde besiegt worden waren, freuten sich die Soldaten.",
                            explanation: "Der Ablativus absolutus ('hostibus victis') ist eine losgelöste Konstruktion im Ablativ. Ein häufiger Fehler ist, den Ablativ als Subjekt des Hauptsatzes zu übersetzen. Der Abl. abs. beschreibt aber die Begleitumstände und wird als Nebensatz übersetzt - oft temporal ('nachdem/als'), kausal ('weil/da') oder konzessiv ('obwohl'). Das PPP zeigt Vorzeitigkeit: Die Feinde wurden ZUERST besiegt, DANN freuten sich die Soldaten."
                        },
                        verification: {
                            latinParts: [
                                { text: "Ponte facto", highlight: true },
                                { text: ", copiae flumen transierunt.", highlight: false }
                            ],
                            options: [
                                "Die Brücke wurde gebaut und die Truppen überquerten den Fluss.",
                                "Die Brücke baute die Truppen, die den Fluss überquerten.",
                                "Nachdem die Brücke gebaut worden war, überquerten die Truppen den Fluss.",
                                "Die gebaute Brücke überquerte den Fluss mit Truppen."
                            ],
                            correct: "Nachdem die Brücke gebaut worden war, überquerten die Truppen den Fluss.",
                            correctFeedback: "Perfekt! Du hast erkannt, dass 'ponte facto' ein Abl. abs. ist und die Vorzeitigkeit mit 'nachdem' korrekt übersetzt. Das Subjekt des Hauptsatzes sind die 'copiae', nicht 'pons'!",
                            wrongFeedback: "'Ponte facto' ist ein Abl. abs. (Ablativ + PPP) und keine Teil des Hauptsatzes. Er gibt die Begleitumstände an: Erst wurde die Brücke gebaut (Vorzeitigkeit!), dann überquerten die Truppen den Fluss. Korrekt: 'Nachdem die Brücke gebaut worden war, ...'"
                        }
                    },
                    {
                        errorType: "Deponentien",
                        color: "indigo",
                        teaching: {
                            latinParts: [
                                { text: "Milites hostes ", highlight: false },
                                { text: "sequuntur", highlight: true },
                                { text: ".", highlight: false }
                            ],
                            options: [
                                "Die Soldaten werden von den Feinden verfolgt.",
                                "Die Soldaten verfolgen die Feinde.",
                                "Die Feinde verfolgen die Soldaten.",
                                "Die Soldaten und die Feinde werden verfolgt."
                            ],
                            correct: "Die Soldaten verfolgen die Feinde.",
                            explanation: "'Sequi' ist ein Deponens - ein Verb mit passiver Form, aber aktiver Bedeutung! 'Sequuntur' sieht aus wie Passiv Präsens 3. Pers. Plural ('sie werden verfolgt'), bedeutet aber aktiv 'sie verfolgen'. Deponentien haben ihre aktive Form 'abgelegt' (lat. deponere). Ein sehr häufiger Fehler ist, Deponentien passiv zu übersetzen, weil die Endungen passiv aussehen."
                        },
                        verification: {
                            latinParts: [
                                { text: "Dux milites ", highlight: false },
                                { text: "hortatus est", highlight: true },
                                { text: ".", highlight: false }
                            ],
                            options: [
                                "Der Anführer wurde von den Soldaten ermutigt.",
                                "Der Anführer ermutigte die Soldaten.",
                                "Die Soldaten ermutigten den Anführer.",
                                "Der Anführer und die Soldaten wurden ermutigt."
                            ],
                            correct: "Der Anführer ermutigte die Soldaten.",
                            correctFeedback: "Sehr gut! 'Hortari' ist ein Deponens. Obwohl 'hortatus est' wie Passiv aussieht (PPP + esse), bedeutet es aktiv 'er ermutigte'. Du hast die Falle vermieden!",
                            wrongFeedback: "'Hortari' (ermutigen) ist ein Deponens mit passiver Form, aber aktiver Bedeutung. 'Hortatus est' = Perfekt von hortari = 'er ermutigte' (AKTIV!), nicht 'er wurde ermutigt'. Der 'dux' ist das Subjekt und handelt aktiv."
                        }
                    }
                ],
                // Runde 2
                [
                    {
                        errorType: "Akkusativ mit Infinitiv (AcI)",
                        color: "blue",
                        teaching: {
                            latinParts: [
                                { text: "Audio ", highlight: false },
                                { text: "patrem venire", highlight: true },
                                { text: ".", highlight: false }
                            ],
                            options: [
                                "Ich höre den Vater kommen.",
                                "Ich höre, dass der Vater kommt.",
                                "Der Vater hört mich kommen.",
                                "Ich höre zum Vater zu kommen."
                            ],
                            correct: "Ich höre, dass der Vater kommt.",
                            explanation: "Der AcI (Akkusativ mit Infinitiv) wird im Deutschen als Nebensatz mit 'dass' übersetzt. 'Patrem' (Akkusativ) wird zum Subjekt des Nebensatzes, 'venire' zum finiten Verb. Der AcI steht nach Verben des Sagens, Denkens und Wahrnehmens (hier: audire). Ein häufiger Fehler ist, den Akkusativ als direktes Objekt des Hauptverbs zu verstehen oder wörtlich zu übersetzen."
                        },
                        verification: {
                            latinParts: [
                                { text: "Scimus ", highlight: false },
                                { text: "hostes adesse", highlight: true },
                                { text: ".", highlight: false }
                            ],
                            options: [
                                "Wir wissen die Feinde anzuwesend sein.",
                                "Wir wissen, dass die Feinde da sind.",
                                "Die Feinde wissen, dass wir da sind.",
                                "Wir wissen die Feinde."
                            ],
                            correct: "Wir wissen, dass die Feinde da sind.",
                            correctFeedback: "Perfekt! Der AcI 'hostes adesse' wurde korrekt als 'dass'-Satz übersetzt. 'Hostes' (Akkusativ) wurde zum Subjekt des Nebensatzes.",
                            wrongFeedback: "'Hostes adesse' ist ein AcI. Im Deutschen brauchen wir einen 'dass'-Satz: 'Wir wissen, dass die Feinde da sind.' Der Akkusativ 'hostes' wird zum Subjekt des Nebensatzes, nicht zum Objekt von 'scire'."
                        }
                    },
                    {
                        errorType: "Präposition in + Akkusativ vs. Ablativ",
                        color: "red",
                        teaching: {
                            latinParts: [
                                { text: "Milites in ", highlight: false },
                                { text: "urbem", highlight: true },
                                { text: " ierunt.", highlight: false }
                            ],
                            options: [
                                "Die Soldaten gingen in der Stadt.",
                                "Die Soldaten gingen in die Stadt.",
                                "Die Soldaten gingen aus der Stadt.",
                                "In der Stadt gingen Soldaten."
                            ],
                            correct: "Die Soldaten gingen in die Stadt.",
                            explanation: "'In' mit Akkusativ (urbem) drückt Richtung/Bewegung aus: 'wohin?' → in die Stadt hinein. 'In' mit Ablativ (urbe) drückt Ort/Ruhe aus: 'wo?' → in der Stadt. Diese Verwechslung ist ein sehr häufiger Fehler! Merke: Akkusativ = Bewegung/Richtung, Ablativ = Ort/Ruhe."
                        },
                        verification: {
                            latinParts: [
                                { text: "Pueri in ", highlight: false },
                                { text: "silva", highlight: true },
                                { text: " ludunt.", highlight: false }
                            ],
                            options: [
                                "Die Jungen spielen in den Wald.",
                                "Die Jungen spielen im Wald.",
                                "Die Jungen spielen aus dem Wald.",
                                "Im Wald werden Jungen gespielt."
                            ],
                            correct: "Die Jungen spielen im Wald.",
                            correctFeedback: "Genau! 'In' + Ablativ (silva) = 'wo?', nicht 'wohin?'. Die Jungen sind bereits im Wald und spielen dort. Keine Bewegung dorthin!",
                            wrongFeedback: "'In' + Ablativ (silva) bedeutet 'wo?' (Ort), nicht 'wohin?' (Richtung). Die Kinder befinden sich bereits im Wald. Für 'in den Wald hinein' bräuchte man den Akkusativ: 'in silvam'."
                        }
                    }
                ],
                // Runde 3
                [
                    {
                        errorType: "PPP - Vorzeitigkeit beachten",
                        color: "green",
                        teaching: {
                            latinParts: [
                                { text: "Epistulam ", highlight: false },
                                { text: "scriptam", highlight: true },
                                { text: " misit.", highlight: false }
                            ],
                            options: [
                                "Er schickte den geschriebenen Brief.",
                                "Er schickte den Brief, der geschrieben worden war.",
                                "Er schrieb und schickte den Brief.",
                                "Der geschriebene Brief schickte ihn."
                            ],
                            correct: "Er schickte den Brief, der geschrieben worden war.",
                            explanation: "Das PPP (Partizip Perfekt Passiv) 'scriptam' drückt Vorzeitigkeit UND Passiv aus. Der Brief wurde ZUERST geschrieben, DANN geschickt. 'Der geschriebene Brief' ist zwar grammatisch richtig, aber verschleiert die zeitliche Abfolge. Besser: 'der Brief, der (zuvor) geschrieben worden war'. Das PPP als Attribut kann temporal aufgelöst werden und zeigt immer eine Handlung, die VOR der Haupthandlung stattfand."
                        },
                        verification: {
                            latinParts: [
                                { text: "Urbem ", highlight: false },
                                { text: "captam", highlight: true },
                                { text: " incenderunt.", highlight: false }
                            ],
                            options: [
                                "Sie eroberten und verbrannten die Stadt.",
                                "Sie verbrannten die Stadt, die erobert worden war.",
                                "Die eroberte Stadt verbrannte sie.",
                                "Sie verbrannten die erobernde Stadt."
                            ],
                            correct: "Sie verbrannten die Stadt, die erobert worden war.",
                            correctFeedback: "Ausgezeichnet! Das PPP 'captam' hast du mit Vorzeitigkeit verstanden: Die Stadt wurde ZUERST erobert, DANN verbrannt.",
                            wrongFeedback: "Das PPP 'captam' drückt Vorzeitigkeit und Passiv aus. Die Stadt wurde zuerst erobert, dann verbrannt. Die richtige Übersetzung berücksichtigt diese zeitliche Abfolge: 'Sie verbrannten die Stadt, die (zuvor) erobert worden war.'"
                        }
                    },
                    {
                        errorType: "cum mit Konjunktiv",
                        color: "purple",
                        teaching: {
                            latinParts: [
                                { text: "Cum nox venisset", highlight: true },
                                { text: ", domum redierunt.", highlight: false }
                            ],
                            options: [
                                "Obwohl die Nacht gekommen war, kehrten sie nach Hause zurück.",
                                "Als die Nacht gekommen war, kehrten sie nach Hause zurück.",
                                "Wenn die Nacht käme, würden sie nach Hause zurückkehren.",
                                "Mit der kommenden Nacht kehrten sie zurück."
                            ],
                            correct: "Als die Nacht gekommen war, kehrten sie nach Hause zurück.",
                            explanation: "Cum + Konjunktiv Plusquamperfekt (venisset) ist ein 'cum historicum' (narrativum) und bedeutet 'als' (temporal) oder 'da/weil' (kausal), NICHT 'obwohl'! Das ist ein sehr häufiger Fehler. Das cum historicum beschreibt die Umstände einer Erzählung. Die Zeitenfolge ist wichtig: Plusquamperfekt drückt Vorzeitigkeit aus (die Nacht kam zuerst, dann kehrten sie heim)."
                        },
                        verification: {
                            latinParts: [
                                { text: "Cum hostes appropinquarent", highlight: true },
                                { text: ", cives timuerunt.", highlight: false }
                            ],
                            options: [
                                "Obwohl die Feinde sich näherten, fürchteten sich die Bürger.",
                                "Als sich die Feinde näherten, fürchteten sich die Bürger.",
                                "Wenn sich die Feinde nähern würden, würden sich die Bürger fürchten.",
                                "Mit den sich nähernden Feinden fürchteten sich die Bürger."
                            ],
                            correct: "Als sich die Feinde näherten, fürchteten sich die Bürger.",
                            correctFeedback: "Richtig! Cum + Konjunktiv Imperfekt = cum historicum = 'als'. Hier ist die Handlung gleichzeitig (Imperfekt), daher keine Vorzeitigkeit wie beim Plusquamperfekt.",
                            wrongFeedback: "Cum + Konjunktiv (appropinquarent) ist ein cum historicum = 'als' (temporal). Die Feinde näherten sich, und gleichzeitig fürchteten sich die Bürger. 'Obwohl' wäre cum concessivum - das passt hier nicht zum Kontext."
                        }
                    }
                ]
            ];

            const getColorClasses = (color) => {
                const colorMap = {
                    'yellow': { bg: 'bg-yellow-50', border: 'border-yellow-600', highlight: 'bg-yellow-200', label: 'bg-yellow-200' },
                    'blue': { bg: 'bg-blue-50', border: 'border-blue-600', highlight: 'bg-blue-200', label: 'bg-blue-200' },
                    'green': { bg: 'bg-green-50', border: 'border-green-600', highlight: 'bg-green-200', label: 'bg-green-200' },
                    'purple': { bg: 'bg-purple-50', border: 'border-purple-600', highlight: 'bg-purple-200', label: 'bg-purple-200' },
                    'red': { bg: 'bg-red-50', border: 'border-red-600', highlight: 'bg-red-200', label: 'bg-red-200' },
                    'indigo': { bg: 'bg-indigo-50', border: 'border-indigo-600', highlight: 'bg-indigo-200', label: 'bg-indigo-200' }
                };
                return colorMap[color] || colorMap['red'];
            };

            const shuffleArray = (array) => {
                const shuffled = [...array];
                for (let i = shuffled.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
                }
                return shuffled;
            };

            React.useEffect(() => {
                const currentData = rounds[currentRound]?.[currentError];
                if (currentData) {
                    const textData = currentPhase === 'teaching' ? currentData.teaching : currentData.verification;
                    setShuffledOptions(shuffleArray(textData.options));
                }
            }, [currentRound, currentError, currentPhase]);

            const handleStart = () => {
                if (username.trim()) {
                    setStage('quiz');
                }
            };

            const handleAnswer = (answer) => {
                setSelectedAnswer(answer);
                setShowFeedback(true);

                const currentData = rounds[currentRound][currentError];
                const textData = currentPhase === 'teaching' ? currentData.teaching : currentData.verification;
                const isCorrect = answer === textData.correct;

                if (currentPhase === 'teaching') {
                    setAnswers([...answers, {
                        phase: 'teaching',
                        errorType: currentData.errorType,
                        correct: isCorrect
                    }]);
                } else {
                    setAnswers([...answers, {
                        phase: 'verification',
                        errorType: currentData.errorType,
                        correct: isCorrect
                    }]);

                    if (isCorrect) {
                        setLearnings([...learnings, currentData.errorType]);
                    }
                }
            };

            const handleNext = () => {
                setShowFeedback(false);
                setSelectedAnswer(null);
                setShuffledOptions([]);

                if (currentPhase === 'teaching') {
                    setCurrentPhase('verification');
                } else {
                    setCurrentPhase('teaching');
                    
                    if (currentError < rounds[currentRound].length - 1) {
                        setCurrentError(currentError + 1);
                    } else if (currentRound < rounds.length - 1) {
                        setCurrentRound(currentRound + 1);
                        setCurrentError(0);
                    } else {
                        setStage('certificate');
                    }
                }
            };

            const handlePrint = () => {
                window.print();
            };

            if (stage === 'welcome') {
                return (
                    <div className="min-h-screen bg-gradient-to-br from-red-50 to-orange-100 p-8">
                        <div className="max-w-2xl mx-auto bg-white rounded-lg shadow-xl p-8">
                            <div className="flex items-center justify-center mb-6">
                                <BookOpen className="w-12 h-12 text-red-600 mr-4" />
                                <h1 className="text-4xl font-bold text-gray-800">
                                    Latein: Typische Übersetzungsfehler
                                </h1>
                            </div>
                            <div className="prose prose-lg mb-8">
                                <p className="text-gray-700">
                                    Willkommen! Dieses Tool hilft dir, die häufigsten Übersetzungsfehler im Lateinischen 
                                    zu erkennen und zu vermeiden.
                                </p>
                                <p className="text-gray-700">
                                    <strong>So funktioniert es:</strong> Du bekommst lateinische Sätze mit typischen 
                                    Fehlerquellen. Nach deiner ersten Übersetzung erfährst du, wo die Schwierigkeit liegt. 
                                    Danach folgt ein ähnlicher Satz zur Überprüfung.
                                </p>
                                <div className="bg-red-50 p-4 rounded-lg my-6">
                                    <h3 className="text-lg font-semibold text-gray-800 mb-2">
                                        Aufbau:
                                    </h3>
                                    <ul className="list-disc list-inside space-y-1 text-gray-700">
                                        <li><strong>3 Runden</strong> mit verschiedenen Fehlerquellen</li>
                                        <li>Pro Runde: <strong>2 typische Fehlerquellen</strong></li>
                                        <li>Pro Fehlerquelle: <strong>2 Texte</strong> (Lehrtext + Überprüfung)</li>
                                        <li>Nach jeder Antwort: Ausführliche Erklärung</li>
                                    </ul>
                                </div>
                            </div>
                            
                            <div className="space-y-4">
                                <label className="block">
                                    <span className="text-gray-700 font-semibold">Dein Name für das Zertifikat:</span>
                                    <input
                                        type="text"
                                        value={username}
                                        onChange={(e) => setUsername(e.target.value)}
                                        className="mt-2 block w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"
                                        placeholder="Gib deinen Namen ein"
                                    />
                                </label>
                                <button
                                    onClick={handleStart}
                                    disabled={!username.trim()}
                                    className="w-full bg-red-600 hover:bg-red-700 disabled:bg-gray-400 text-white font-bold py-3 px-6 rounded-lg flex items-center justify-center gap-2 transition"
                                >
                                    Lernen starten <ChevronRight />
                                </button>
                            </div>
                        </div>
                    </div>
                );
            }

            if (stage === 'quiz') {
                const currentData = rounds[currentRound][currentError];
                const textData = currentPhase === 'teaching' ? currentData.teaching : currentData.verification;
                const isTeaching = currentPhase === 'teaching';
                const isCorrect = selectedAnswer === textData.correct;
                const colors = getColorClasses(currentData.color);

                return (
                    <div className="min-h-screen bg-gradient-to-br from-blue-50 to-purple-100 p-8">
                        <div className="max-w-3xl mx-auto">
                            <div className="bg-white rounded-lg shadow-xl p-8">
                                <div className="mb-6">
                                    <div className="flex justify-between text-sm text-gray-600 mb-2">
                                        <span>Runde {currentRound + 1} von {rounds.length}</span>
                                        <span>Fehlerquelle {currentError + 1} von {rounds[currentRound].length}</span>
                                    </div>
                                    <div className="mb-2">
                                        <span className={`inline-block ${colors.label} text-gray-800 px-3 py-1 rounded-full text-sm font-semibold`}>
                                            {currentData.errorType}
                                        </span>
                                        {!isTeaching && (
                                            <span className="ml-2 inline-block bg-gray-200 text-gray-800 px-3 py-1 rounded-full text-sm font-semibold">
                                                Überprüfung
                                            </span>
                                        )}
                                    </div>
                                    <div className="w-full bg-gray-200 rounded-full h-2">
                                        <div 
                                            className="bg-red-600 h-2 rounded-full transition-all"
                                            style={{ 
                                                width: `${((currentRound * rounds[currentRound].length * 2 + currentError * 2 + (isTeaching ? 0 : 1)) / (rounds.length * 2 * 2)) * 100}%` 
                                            }}
                                        />
                                    </div>
                                </div>

                                <div className={`${colors.bg} p-6 rounded-lg mb-8 border-l-4 ${colors.border}`}>
                                    <p className="text-2xl text-gray-800 font-serif mb-2">
                                        {textData.latinParts.map((part, idx) => (
                                            part.highlight ? (
                                                <span key={idx} className={`${colors.highlight} px-1 rounded font-bold`}>
                                                    {part.text}
                                                </span>
                                            ) : (
                                                <span key={idx}>{part.text}</span>
                                            )
                                        ))}
                                    </p>
                                    <p className="text-sm text-gray-600 italic">
                                        {isTeaching ? 'Wähle die korrekte Übersetzung:' : 'Hast du die Fehlerquelle verstanden?'}
                                    </p>
                                </div>

                                {!showFeedback ? (
                                    <div className="space-y-3">
                                        {shuffledOptions.map((option, index) => (
                                            <button
                                                key={index}
                                                onClick={() => handleAnswer(option)}
                                                className="w-full text-left px-6 py-4 bg-white border-2 border-gray-300 rounded-lg hover:border-red-500 hover:bg-red-50 transition"
                                            >
                                                {option}
                                            </button>
                                        ))}
                                    </div>
                                ) : (
                                    <div className="space-y-6">
                                        <div className={`p-6 rounded-lg ${isCorrect ? 'bg-green-50 border-2 border-green-500' : 'bg-red-50 border-2 border-red-500'}`}>
                                            <h3 className={`text-xl font-bold mb-3 ${isCorrect ? 'text-green-800' : 'text-red-800'}`}>
                                                {isCorrect ? '✓ Richtig!' : '✗ Nicht korrekt'}
                                            </h3>
                                            <p className="text-gray-700 mb-3">
                                                <span className="font-semibold">Deine Antwort:</span> {selectedAnswer}
                                            </p>
                                            {!isCorrect && (
                                                <p className="text-gray-700 mb-3">
                                                    <span className="font-semibold">Korrekte Übersetzung:</span> <strong>{textData.correct}</strong>
                                                </p>
                                            )}
                                            <div className={`bg-white p-4 rounded border-l-4 ${colors.border}`}>
                                                <p className="text-sm font-semibold text-gray-700 mb-2">
                                                    {isTeaching ? 'Erklärung der Fehlerquelle:' : isCorrect ? 'Sehr gut!' : 'Noch einmal:'}
                                                </p>
                                                <p className="text-gray-700 leading-relaxed">
                                                    {isTeaching ? textData.explanation : isCorrect ? textData.correctFeedback : textData.wrongFeedback}
                                                </p>
                                            </div>
                                        </div>
                                        <button
                                            onClick={handleNext}
                                            className="w-full bg-red-600 hover:bg-red-700 text-white font-bold py-3 px-6 rounded-lg flex items-center justify-center gap-2 transition"
                                        >
                                            {isTeaching ? 'Zur Überprüfung' : 'Weiter'} <ChevronRight />
                                        </button>
                                    </div>
                                )}
                            </div>
                        </div>
                    </div>
                );
            }

            if (stage === 'certificate') {
                const teachingCorrect = answers.filter(a => a.phase === 'teaching' && a.correct).length;
                const verificationCorrect = answers.filter(a => a.phase === 'verification' && a.correct).length;
                const totalTeaching = answers.filter(a => a.phase === 'teaching').length;
                const totalVerification = answers.filter(a => a.phase === 'verification').length;

                const uniqueLearnings = [...new Set(learnings)];

                return (
                    <div className="min-h-screen bg-gradient-to-br from-purple-50 to-pink-100 p-8">
                        <div className="max-w-4xl mx-auto">
                            <div className="bg-white rounded-lg shadow-2xl p-12 certificate-page">
                                <div className="text-center mb-8">
                                    <Award className="w-20 h-20 text-red-600 mx-auto mb-4" />
                                    <h1 className="text-4xl font-bold text-gray-800 mb-2">
                                        Lernzertifikat
                                    </h1>
                                    <p className="text-xl text-gray-600">
                                        Latein: Typische Übersetzungsfehler
                                    </p>
                                </div>

                                <div className="border-t-2 border-b-2 border-red-600 py-6 mb-8 text-center">
                                    <p className="text-lg text-gray-700 mb-2">
                                        Hiermit wird bestätigt, dass
                                    </p>
                                    <p className="text-3xl font-bold text-gray-800 mb-2">
                                        {username}
                                    </p>
                                    <p className="text-lg text-gray-700">
                                        das Latein-Lerntool absolviert hat
                                    </p>
                                </div>

                                <div className="mb-8">
                                    <h2 className="text-2xl font-bold text-gray-800 mb-4">
                                        Deine Ergebnisse:
                                    </h2>
                                    <div className="grid grid-cols-2 gap-4 mb-4">
                                        <div className="bg-red-50 p-4 rounded-lg">
                                            <p className="text-sm text-gray-600 mb-1">Erste Texte (Lernen)</p>
                                            <p className="text-2xl font-bold text-gray-800">
                                                {teachingCorrect} / {totalTeaching}
                                            </p>
                                        </div>
                                        <div className="bg-purple-50 p-4 rounded-lg">
                                            <p className="text-sm text-gray-600 mb-1">Überprüfungen</p>
                                            <p className="text-2xl font-bold text-gray-800">
                                                {verificationCorrect} / {totalVerification}
                                            </p>
                                        </div>
                                    </div>
                                </div>

                                <div className="mb-8">
                                    <h2 className="text-2xl font-bold text-gray-800 mb-4">
                                        Behandelte Fehlerquellen:
                                    </h2>
                                    <div className="bg-gray-50 p-4 rounded-lg">
                                        <ul className="list-disc list-inside space-y-2 text-gray-700">
                                            {uniqueLearnings.map((learning, index) => (
                                                <li key={index} className="font-medium">
                                                    {learning}
                                                </li>
                                            ))}
                                        </ul>
                                    </div>
                                </div>

                                <div className="text-center text-gray-600 text-sm mb-6">
                                    <p>{new Date().toLocaleDateString('de-DE', { year: 'numeric', month: 'long', day: 'numeric' })}</p>
                                </div>

                                <div className="flex gap-4 no-print">
                                    <button
                                        onClick={handlePrint}
                                        className="flex-1 bg-red-600 hover:bg-red-700 text-white font-bold py-3 px-6 rounded-lg flex items-center justify-center gap-2 transition"
                                    >
                                        <Printer /> Zertifikat drucken
                                    </button>
                                    <button
                                        onClick={() => window.location.reload()}
                                        className="flex-1 bg-gray-600 hover:bg-gray-700 text-white font-bold py-3 px-6 rounded-lg transition"
                                    >
                                        Neu starten
                                    </button>
                                </div>
                            </div>
                        </div>

                        <style>{`
                            @media print {
                                .no-print {
                                    display: none !important;
                                }
                                .certificate-page {
                                    box-shadow: none !important;
                                    page-break-after: avoid;
                                }
                                body {
                                    background: white !important;
                                }
                            }
                        `}</style>
                    </div>
                );
            }
        };

        ReactDOM.render(<LatinQuiz />, document.getElementById('root'));
    </script>
</body>
</html>
